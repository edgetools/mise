#!/usr/bin/env sh

MODULE_DIR="$(
  cd "$( dirname "$0" )" > /dev/null &&
  cd .. &&
  pwd
)"

exec pwsh-preview -NoProfile -Command "$(cat <<EOL
& {
  # add MODULE_DIR to PSModulePath
  \$env:PSModulePath = "${MODULE_DIR}:\${env:PSModulePath}"
  # import mise
  Import-Module mise -Force -ErrorAction Stop;
  # invoke the cli, passing any args
  Invoke-MiseCli${*+" ${*}"};
}
EOL
)"
